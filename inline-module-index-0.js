const t=({h:t,s:e,v:o,a:s})=>{const r=(200-e)*o/100;return{h:t,s:r>0&&r<200?e*o/100/(r<=100?r:200-r)*100:0,l:r/2,a:s}},e=e=>{const{h:o,s:s,l:r}=t(e);return`hsl(${o}, ${s}%, ${r}%)`},o=e=>{const{h:o,s:s,l:r,a:i}=t(e);return`hsla(${o}, ${s}%, ${r}%, ${i})`},s=(t,e)=>{if(t===e)return!0;for(const o in t)if(t[o]!==e[o])return!1;return!0},r=t=>{const e=document.createElement("template");return e.innerHTML=t,e},i=(t,e)=>{const o=t.shadowRoot||t.attachShadow({mode:"open"});return o.appendChild(e.content.cloneNode(!0)),o},a=(t,e=0,o=1)=>t>o?o:t<e?e:t;const n=r('<style>:host{outline:none}:host(:focus) [part=pointer]{transform:translate(-50%, -50%) scale(1.1)}#interactive{position:absolute;left:0;top:0;width:100%;height:100%;touch-action:none;user-select:none;-webkit-user-select:none}[part=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%, -50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part=pointer]::after{display:block;content:"";position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;background-color:currentColor}</style><div id="interactive"><div part="pointer"></div></div>');let h=!1;const l=t=>"touches"in t,c=(t,e,o)=>{t.dispatchEvent(new CustomEvent("move",{bubbles:!0,detail:t.getMove(e,o)}))},d=(t,e)=>{const o=l(e)?e.touches[0]:e,s=t.getBoundingClientRect();c(t,{left:a((o.pageX-(s.left+window.pageXOffset))/s.width),top:a((o.pageY-(s.top+window.pageYOffset))/s.height)})};class u extends HTMLElement{constructor(){super(),this.pointer=i(this,n).querySelector("[part=pointer]").style,this.addEventListener("mousedown",this),this.addEventListener("touchstart",this),this.addEventListener("keydown",this),this.setAttribute("role","slider"),this.setAttribute("tabindex","0")}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(h?"touchmove":"mousemove",this),e(h?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!(t=>!(h&&!l(t)||(h||(h=l(t)),0)))(t)||!h&&0!=t.button)return;d(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),d(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":((t,e)=>{const o=e.keyCode;o>40||t.xy&&o<37||o<33||(e.preventDefault(),c(t,{left:39===o?.01:37===o?-.01:34===o?.05:33===o?-.05:35===o?1:36===o?-1:0,top:40===o?.01:38===o?-.01:0},!0))})(this,t)}}setStyles(t){for(const e in t)this.pointer.setProperty(e,t[e])}}const p=r("<style>:host{position:relative;bottom:0;left:0;right:0;height:24px;background:linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)}[part=pointer]{top:50%;z-index:2}</style>");customElements.define("vc-hue",class extends u{constructor(){super(),i(this,p),this.setAttribute("aria-label","Hue"),this.setAttribute("aria-valuemin","0"),this.setAttribute("aria-valuemax","360")}connectedCallback(){if(this.hasOwnProperty("hue")){const t=this.hue;delete this.hue,this.hue=t}}get xy(){return!1}get hue(){return this._h}set hue(t){this._h=t,this.setStyles({left:t/360*100+"%",color:e({h:t,s:100,v:100,a:1})}),this.setAttribute("aria-valuenow",""+Math.round(t))}getMove(t,e){return{h:e?a(this.hue+360*t.left,0,360):360*t.left}}});const v=r("<style>:host{display:block;position:relative;flex-grow:1;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top, #000, rgba(0, 0, 0, 0)),linear-gradient(to right, #fff, rgba(255, 255, 255, 0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=pointer]{z-index:3}</style>");customElements.define("vc-saturation",class extends u{constructor(){super(),i(this,v),this.setAttribute("aria-label","Color")}connectedCallback(){if(this.hasOwnProperty("hsva")){const t=this.hsva;delete this.hsva,this.hsva=t}}get xy(){return!0}get hsva(){return this._hsva}set hsva(t){this._hsva=t,this.style.backgroundColor=e({h:t.h,s:100,v:100,a:1}),this.setStyles({top:100-t.v+"%",left:t.s+"%",color:e(t)}),this.setAttribute("aria-valuetext",`Saturation ${Math.round(t.s)}%, Brightness ${Math.round(t.v)}%`)}getMove(t,e){return{s:e?a(this.hsva.s+100*t.left,0,100):100*t.left,v:e?a(this.hsva.v-100*t.top,0,100):Math.round(100-100*t.top)}}});const f=r('\n<style>:host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none !important}[part]:last-child{border-radius:0 0 8px 8px}</style>\n<vc-saturation part="saturation" exportparts="pointer: saturation-pointer"></vc-saturation>\n<vc-hue part="hue" exportparts="pointer: hue-pointer"></vc-hue>\n'),g=Symbol("h"),b=Symbol("s"),m=Symbol("same"),y=Symbol("color"),x=Symbol("hsva"),w=Symbol("change"),M=Symbol("render");class k extends HTMLElement{constructor(){super();const t=i(this,f);t.addEventListener("move",this),this[b]=t.children[1],this[g]=t.children[2]}static get observedAttributes(){return["color"]}get color(){return this[y]}set color(t){if(!this[m](t)){const e=this.colorModel.toHsva(t);this[M](e),this[w](t,e)}}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,o){const s=this.colorModel.fromAttr(o);this[m](s)||(this.color=s)}handleEvent(t){const e=Object.assign({},this[x],t.detail);let o;this[M](e),s(e,this[x])||this[m](o=this.colorModel.fromHsva(e))||this[w](o,e)}[m](t){return this.color&&this.colorModel.equal(t,this.color)}[M](t){this[b].hsva=t,this[g].hue=t.h}[w](t,e){this[y]=t,this[x]=e,this.dispatchEvent(new CustomEvent("color-changed",{detail:{value:t}}))}}const C=r('<style>:host{position:relative;height:24px;background-color:#fff}:host::after{content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}:host::after,#gradient{position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}:host,[part=pointer]{background-color:#fff;background-image:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>\')}</style><div id="gradient"></div>');customElements.define("vc-alpha",class extends u{constructor(){super(),this.gradient=i(this,C).querySelector("#gradient"),this.setAttribute("aria-label","Alpha"),this.setAttribute("aria-valuemin","0"),this.setAttribute("aria-valuemax","1")}connectedCallback(){if(this.hasOwnProperty("hsva")){const t=this.hsva;delete this.hsva,this.hsva=t}}get xy(){return!1}get hsva(){return this._hsva}set hsva(t){this._hsva=t;const e=o({...t,a:0}),s=o({...t,a:1}),r=100*t.a;this.gradient.style.backgroundImage=`linear-gradient(to right, ${e}, ${s}`,this.setStyles({top:"50%",left:r+"%",color:o(t)});const i=Math.round(r);this.setAttribute("aria-valuenow",""+i),this.setAttribute("aria-valuetext",i+"%")}getMove(t,e){return{a:e?a(this.hsva.a+t.left):t.left}}});const E=r('<vc-alpha part="alpha" exportparts="pointer: alpha-pointer"></vc-alpha>'),S=Symbol("a");class A extends k{constructor(){super(),this[S]=i(this,E).lastElementChild}[M](t){super[M](t),this[S].hsva=t}}const $={defaultColor:{r:0,g:0,b:0,a:1},toHsva:({r:t,g:e,b:o,a:s})=>{const r=Math.max(t,e,o),i=r-Math.min(t,e,o),a=i?r===t?(e-o)/i:r===e?2+(o-t)/i:4+(t-e)/i:0;return{h:Math.round(60*(a<0?a+6:a)),s:Math.round(r?i/r*100:0),v:Math.round(r/255*100),a:s}},fromHsva:({h:t,s:e,v:o,a:s})=>{t=t/360*6,e/=100,o/=100;const r=Math.floor(t),i=o*(1-e),a=o*(1-(t-r)*e),n=o*(1-(1-t+r)*e),h=r%6;return{r:Math.round(255*[o,a,i,i,n,o][h]),g:Math.round(255*[n,o,o,a,i,i][h]),b:Math.round(255*[i,i,n,o,o,a][h]),a:s}},equal:s,fromAttr:t=>JSON.parse(t)};class P extends A{get colorModel(){return $}}customElements.define("rgba-color-picker",class extends P{});const L=()=>{const t=document.createElement("canvas");return t.width=64,t.height=64,t};let O,H,D;const _=t=>(H||(H=L(),D=(()=>{const t=L(),e=t.getContext("2d");return e.beginPath(),e.arc(32,32,28,0,2*Math.PI,!1),e.closePath(),e.shadowColor="rgba(0, 0, 0, 0.4)",e.shadowOffsetY=1,e.shadowBlur=6,e.fillStyle="#fff",e.fill(),t})()),function(t,e,o,s){var r,i=!1,a=0;function n(){r&&clearTimeout(r)}function h(){for(var h=arguments.length,l=new Array(h),c=0;c<h;c++)l[c]=arguments[c];var d=this,u=Date.now()-a;function p(){a=Date.now(),o.apply(d,l)}function v(){r=void 0}i||(s&&!r&&p(),n(),void 0===s&&u>t?p():!0!==e&&(r=setTimeout(s?v:p,void 0===s?t-u:t)))}return"boolean"!=typeof e&&(s=o,o=e,e=void 0),h.cancel=function(){n(),i=!0},h}(500,()=>{if(!(window.innerWidth<768&&O)){const e=H.getContext("2d");e.clearRect(0,0,64,64),e.drawImage(D,0,0),e.beginPath(),e.arc(32,32,22,0,2*Math.PI,!1),e.closePath(),e.fillStyle=t,e.fill();const o=document.createElement("link");o.rel="shortcut icon",o.href=H.toDataURL("image/x-icon"),O&&document.head.removeChild(O),document.head.appendChild(o),O=o}})),q=document.querySelector("rgba-color-picker");q.addEventListener("color-changed",t=>{const e=t.detail.value,o=`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`;document.body.style.backgroundColor=o;const s=(({r:t,g:e,b:o})=>(299*t+587*e+114*o)/1e3)(e)>128||e.a<.5?"#000":"#fff";document.body.style.setProperty("--contrast",s),_(o)()}),q.color={r:30,g:136,b:229,a:1};
